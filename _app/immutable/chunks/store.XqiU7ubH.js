import{s as l}from"./index.CTahVygz.js";import{u as c,g as f,U as o,s as a,n as i,m as _,a as b}from"./runtime.BeMPr59v.js";function p(n,s,u){let e=u[s];const t=e===void 0;t&&(e={store:null,last_value:null,value:_(o),unsubscribe:i},u[s]=e),(t||e.store!==n)&&(e.unsubscribe(),e.store=n??null,e.unsubscribe=d(n,e.value));const r=f(e.value);return r===o?e.last_value:r}function d(n,s){return n==null?(a(s,void 0),i):l(n,u=>a(s,u))}function I(n){m(()=>{let s;for(s in n)n[s].unsubscribe()})}function m(n){c(()=>()=>b(n))}export{p as s,I as u};
